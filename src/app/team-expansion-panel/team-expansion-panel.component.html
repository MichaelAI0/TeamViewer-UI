<!-- Expansion panel that is on the left card under Teams -->
<mat-accordion>
  <mat-expansion-panel
    [expanded]="panelOpenState"
    class="full-width"
    *ngFor="let team of teams"
    (opened)="expandedPanel(team)"
    (closed)="closeExpanded()"
  >
    <mat-expansion-panel-header>
      <mat-panel-title>
        {{ team.name }}
      </mat-panel-title>
    </mat-expansion-panel-header>

    <div class="member-photos">
      <div class="member-avatar" *ngFor="let member of team.members">
        <div
          class="avatar-image"
          [ngStyle]="{ 'background-image': 'url(' + getMemberPhoto() + ')' }"
          matTooltip="{{ member.first_name }} {{ member.last_name }}"
          (click)="openMemberDetails(member)"
        ></div>
      </div>
    </div>

    <mat-action-row>
      <div class="member-count">
        <span class="error-message" *ngIf="showErrorMessage">
          Team size limited to 12 members </span
        ><span class="member-counter">
          {{ team.members.length }}/{{ maxTeamMembers }}</span
        >
      </div>

      <button
        mat-button
        [disabled]="team.members.length >= maxTeamMembers"
        (click)="openDialog()"
      >
        <mat-icon class="mat-icon-person-color">person_add</mat-icon>
      </button>
    </mat-action-row>
  </mat-expansion-panel>
</mat-accordion>
